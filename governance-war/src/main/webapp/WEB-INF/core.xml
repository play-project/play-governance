<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

	<import resource="classpath:META-INF/cxf/cxf.xml" />
	<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
	<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

	<bean id="managementservice"
		class="org.ow2.play.governance.service.GovernanceManagementService">
	</bean>
	
	<bean id="subscriptionstorageservice"
		class="org.ow2.play.governance.storage.MongoSubscriptionRegistry"  init-method="init">
	</bean>
	
	<bean id="bootsubscriptionstorageservice"
		class="org.ow2.play.governance.storage.MongoBootSubscriptionService" init-method="init">
	</bean>
	
	<bean id="wsnsubscriptionservice"
		class="org.ow2.play.governance.wsn.SubscriptionServiceClient">
	</bean>

	<bean id="subscriptionmanagementservice"
		class="org.ow2.play.governance.service.SubscriptionManagementService">
		<property name="subscriptionService" ref="wsnsubscriptionservice"/>
		<property name="subscriptionRegistry" ref="subscriptionstorageservice"/>
		<property name="serviceRegistry" ref="registryservice"/>
	</bean>
	
	<bean id="eventservice"
		class="org.ow2.play.governance.service.EventGovernanceService">
		<property name="serviceRegistry" ref="registryservice" />
		<property name="subscriptionService" ref="wsnsubscriptionservice" />
		<property name="subscriptionRegistry" ref="subscriptionstorageservice" />
		<property name="metadataService" ref="metadataservice" />
	</bean>
	
	<bean id="topicregistryservice"
		class="org.ow2.play.governance.service.TopicRegistryService">
		<property name="metadataService" ref="metadataservice" />
	</bean>
	
	<!-- DCEP Governance -->
	<bean id="simplepatternservice" class="org.ow2.play.governance.dcep.SimplePatternServiceImpl">
		<property name="registry" ref="registryservice" />
		<property name="metadataService" ref="metadataservice" />
	</bean>
	
	<bean id="patternregistry" class="org.ow2.play.governance.storage.MongoPatternRegistry"
		init-method="init">
	</bean>
	
	<bean id="complexpatternservice" class="org.ow2.play.governance.dcep.ComplexPatternServiceImpl">
		<property name="simplePatternService" ref="simplepatternservice" />
		<property name="eventGovernance" ref="eventservice" />
		<property name="patternRegistry" ref="patternregistry" />
	</bean>
	
	<bean id="patternservice" class="org.ow2.play.governance.dcep.PatternServiceImpl">
		<property name="complexPatternService" ref="complexpatternservice" />
		<property name="simplePatternService" ref="simplepatternservice" />
	</bean>
	
	<!-- EC Wrapper -->
	<bean id="ecservice" class="org.ow2.play.governance.ec.EventCloudsManagementWsImpl">
		<property name="registry" ref="registryservice" />
	</bean>
	
	<!-- User Management -->
	<bean id="groupservice" class="org.ow2.play.governance.groups.GroupServiceImpl">
		<property name="metadataService" ref="metadataservice"/>
	</bean>
	
	<bean id="grouprestservice" class="org.ow2.play.governance.groups.rest.GroupService">
		<property name="groupService" ref="groupservice"/>
	</bean>
		
</beans>